--- lib/md5.c.orig	2008-09-02 16:50:01.000000000 -0700
+++ lib/md5.c	2008-09-02 16:52:33.000000000 -0700
@@ -55,7 +55,10 @@
 
 #else
 
-#ifdef USE_SSLEAY
+#ifdef __APPLE__
+#define COMMON_DIGEST_FOR_OPENSSL
+#include <CommonCrypto/CommonDigest.h>
+#elif defined(USE_SSLEAY)
 /* When OpenSSL is available we use the MD5-function from OpenSSL */
 
 #  ifdef USE_OPENSSL
